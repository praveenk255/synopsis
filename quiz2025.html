<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Multi Quiz App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <div class="max-w-4xl mx-auto p-4">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
      <h1 class="text-2xl sm:text-3xl font-bold text-blue-700 text-center"> Avsec Basic Quiz</h1>
      <select id="sheetSelector" class="border rounded px-3 py-2 text-gray-700">
        <option value="">-- Select Quiz --</option>
        <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSkl3zFBB8s5jFoh3mNbRUbETM6k0FPkBwRmu9sRO-SSTFb5O-HaxPNACCjqOLgXEdzpVJxRYetJ4aO/pub?output=csv">Basic 1</option>
        <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSIpr6CpRW3F9kae8F3_cqqiXOtEL6CqCJlgsiJ79_l348bEsa2UWI93i4_chElLeG4JDNGSudflxf9/pub?output=csv">Basic 2</option>
        <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vQXg2KZDq8TtDq8xjVMNaveQXkhBrTIuxC-39EK1htO68FMKfEeLUfhqCNsacxSm6Vk5rg7eusQP_au/pub?output=csv">Basic 3</option>
<option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vTepTt61Dhntqokek0QH1fQK0Oo3lOI9qHbwHNGIbe2hk8vU3XHH2OiN1HyvoEwpY81Vi0ISOrqzYae/pub?output=csv">Basic 4</option>
  <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vRSnPYhv-vMmKL77c5XoirZGaqMjVyEppgq9Wp9S6GfDUvP1IiZRY2kZ6K2pT5LDPMXto1D1R3f2-Vu/pub?output=csv">Basic 5</option>
  <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSJUr0Br78XjprIIUkZhN94udUK9YhODYRLmLiKSkhz6ifqhh1PIshqv_ZaM6kpDumwy6V_oCmjNt9E/pub?output=csv">Basic 6</option>
  <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vRejjJTEmWGWXlrnOoUDSkAMm7P9GXRMd3wEpl2U3zk4Aua3NJLVhnFRAh8quK3-8FV-KbDr_RDz5-4/pub?output=csv">Basic 7</option>
  <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vQAEQfNB9GxnTAXPPhYQd4aN3Mjizk3WauJ-IoUGlSCG6MmQdZmtB896hFOPdDxWgkgJf739RWSCS0_/pub?output=csv">Basic 8</option>
  <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vRj1KcGeC1ZYQsmzEp3zOeDv4MgSAqSwkp7vjQh0b-R1o58gfScF25zz4K9UByc5PhYA4qZDSCA7OKw/pub?output=csv">Basic 9</option>
  <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSKKmIAXa0qs-dFO4njh3DmZGu5JoDTpfaZWOWXNtO5_DFz42YSATMwHCQ7v56MRJLIjp9QPZMOgM6X/pub?output=csv">Basic 10</option>
  <option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vTZEpBXKF8Rn67md2PhNTH4w-a0EG4ytYOuGdsjYSzSugSv3i3Q9SszT1OXeCYAt7HR4e2nAsO3bWp8/pub?output=csv">Basic 11</option>
<option value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSE2qa-X0ffNPq3_YmLwbwgW1wW0NpkFNdAuhuF-UcG5fmU9eFMVDEmUhkmyVG2G_dwfo2B23U2qR7a/pub?output=csv">Terminologies</option>




<!-- Add more quiz links here -->
      </select>
    </div>

    <div id="quiz-container" class="space-y-6"></div>
  </div>

  <script>
    const clean = (text) =>
      (text || "").toString().replace(/\r?\n|\r/g, " ").replace(/\s+/g, " ").trim();

    document.getElementById("sheetSelector").addEventListener("change", function () {
      const url = this.value;
      if (url) loadQuestions(url);
    });

    async function loadQuestions(sheetUrl) {
      try {
        const res = await fetch(sheetUrl);
        const csv = await res.text();

        const parsed = Papa.parse(csv.trim(), {
          header: true,
          skipEmptyLines: true
        });

        const rows = parsed.data;

        const questions = rows
          .filter(row => row["English Question"] && row["Correct"])
          .map((row, i) => ({
            sno: clean(row["S.NO"]),
            question: clean(row["English Question"]),
            options: [
              clean(row["Option 1"]),
              clean(row["Option 2"]),
              clean(row["Option 3"]),
              clean(row["Option 4"]),
            ],
            correct: parseInt(clean(row["Correct"])) - 1,
          }));

        renderQuestions(questions);
      } catch (error) {
        document.getElementById("quiz-container").innerHTML =
          `<p class="text-red-600">Error loading quiz. Please check the sheet format.</p>`;
        console.error(error);
      }
    }

    function renderQuestions(questions) {
  const container = document.getElementById("quiz-container");
  container.innerHTML = "";

  questions.forEach((q, qIndex) => {
    const card = document.createElement("div");
    card.className = "bg-white rounded-xl shadow-md p-5";

    const questionEl = document.createElement("div");
    questionEl.className = "font-semibold text-lg mb-4";
    questionEl.textContent = `${qIndex + 1}. ${q.question}`;
    card.appendChild(questionEl);

    const optionsDiv = document.createElement("div");
    optionsDiv.className = "grid gap-3";

    const feedbackEl = document.createElement("div");
    feedbackEl.className = "mt-3 text-md font-medium hidden";

    q.options.forEach((opt, idx) => {
      const btn = document.createElement("button");
      btn.className =
        "option-button w-full text-left px-4 py-2 rounded-md border border-gray-300 bg-gray-100 hover:bg-blue-100 transition-colors";
      btn.textContent = opt;

      btn.onclick = () => {
        // Disable all buttons after one selection
        Array.from(optionsDiv.children).forEach((child, childIdx) => {
          child.disabled = true;
          child.classList.remove("bg-green-100", "text-green-700", "border-green-400");
          child.classList.remove("bg-red-100", "text-red-700", "border-red-400");

          if (childIdx === q.correct) {
            child.classList.add("bg-green-100", "text-green-700", "border-green-400");
          }
        });

        if (idx === q.correct) {
          btn.classList.add("bg-green-100", "text-green-700", "border-green-400");
          feedbackEl.textContent = "Correct!";
          feedbackEl.className = "mt-3 text-green-700 font-semibold";
        } else {
          btn.classList.add("bg-red-100", "text-red-700", "border-red-400");
          feedbackEl.textContent = "Incorrect!";
          feedbackEl.className = "mt-3 text-red-700 font-semibold";
        }
      };

      optionsDiv.appendChild(btn);
    });

    card.appendChild(optionsDiv);
    card.appendChild(feedbackEl);
    container.appendChild(card);
  });
}


  </script>
</body>
</html>
